<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>校園鳥類觀察 AR 系統 - 麻雀測試</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <style>
      .ui-panel { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); width: 80%; background: rgba(255,255,255,0.9); padding: 15px; border-radius: 15px; text-align: center; z-index: 1000; font-family: sans-serif; }
      button { padding: 10px 20px; font-size: 16px; cursor: pointer; background: #4CAF50; color: white; border: none; border-radius: 5px; }
      #clue-text { margin-bottom: 10px; font-weight: bold; color: #333; }
    </style>
  </head>

  <body style="margin: 0; overflow: hidden;">
    <div class="ui-panel">
      <div id="clue-text">準備好開始觀察了嗎？</div>
      <button id="next-btn" onclick="nextStep()">獲得線索 1：身體</button>
    </div>

    <a-scene embedded arjs="sourceType: webcam; debugUIEnabled: false;">
      <a-marker preset="hiro">
        <a-image id="body" position="0 0 0" rotation="-90 0 0" width="2" height="1.12" visible="false" src="https://raw.githubusercontent.com/AglaeH/bird-ar-study/main/assets/sparrow/sparrow_body.png"></a-image>
        <a-image id="wing" position="0 0 0.01" rotation="-90 0 0" width="2" height="1.12" visible="false" src="https://raw.githubusercontent.com/AglaeH/bird-ar-study/main/assets/sparrow/sparrow_wing.png"></a-image>
        <a-image id="head" position="0 0 0.02" rotation="-90 0 0" width="2" height="1.12" visible="false" src="https://raw.githubusercontent.com/AglaeH/bird-ar-study/main/assets/sparrow/sparrow_head.png"></a-image>
        <a-image id="beak" position="0 0 0.03" rotation="-90 0 0" width="2" height="1.12" visible="false" src="https://raw.githubusercontent.com/AglaeH/bird-ar-study/main/assets/sparrow/sparrow_beak.png"></a-image>
        <a-image id="feet" position="0 0 0.04" rotation="-90 0 0" width="2" height="1.12" visible="false" src="https://raw.githubusercontent.com/AglaeH/bird-ar-study/main/assets/sparrow/sparrow_feet.png"></a-image>
      </a-marker>
      <a-entity camera></a-entity>
    </a-scene>

    <script>
      let currentStep = 0;
      const steps = [
        { id: 'body', clue: '線索 1：它有著棕色圓滾滾的身體。', btn: '選對了！下一關：翅膀' },
        { id: 'wing', clue: '線索 2：翅膀上有細小的黑白斑點。', btn: '選對了！下一關：頭部' },
        { id: 'head', clue: '線索 3：臉頰上有明顯的圓形大黑斑。', btn: '選對了！下一關：嘴巴' },
        { id: 'beak', clue: '線索 4：黑色的嘴喙呈現厚實的圓錐狀。', btn: '選對了！最後一關：腳' },
        { id: 'feet', clue: '線索 5：它的腳是淡肉色的。', btn: '恭喜！完成麻雀觀察' }
      ];

      function nextStep() {
        if (currentStep < steps.length) {
          const item = steps[currentStep];
          document.getElementById(item.id).setAttribute('visible', 'true');
          document.getElementById('clue-text').innerText = item.clue;
          currentStep++;
          if (currentStep < steps.length) {
            document.getElementById('next-btn').innerText = steps[currentStep-1].btn;
          } else {
            document.getElementById('next-btn').style.display = 'none';
          }
        }
      }
    </script>
  </body>
</html>
